<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë²„ìŠ¤ ì •ë¥˜ì¥ ë°ì´í„° ë¶„ì„ ë³´ê³ ì„œ (íŒŒì£¼ì‹œ ì˜ˆì‹œ)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            width: 80%;
            margin: auto;
            background: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #007bff;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        #map {
            height: 500px;
            width: 100%;
            margin-bottom: 30px;
            border: 1px solid #ccc;
        }
        .chart-container {
            width: 90%;
            max-width: 700px;
            margin: 20px auto;
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9em;
            color: #777;
        }
    </style>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
    <!-- Chart.js JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>ğŸšŒ ë²„ìŠ¤ ì •ë¥˜ì¥ ë°ì´í„° ë¶„ì„ ë³´ê³ ì„œ (íŒŒì£¼ì‹œ ì˜ˆì‹œ)</h1>
        <p>ë³¸ ë³´ê³ ì„œëŠ” ì œê³µëœ ë²„ìŠ¤ ì •ë¥˜ì¥ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹œê°í™”í•œ ìë£Œì…ë‹ˆë‹¤. ë°ì´í„° ë¶„ì„ ìˆ˜ì—…ì˜ ì˜ˆì‹œë¡œ í™œìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

        <h2>1. ë°ì´í„° ìƒ˜í”Œ</h2>
        <p>ì•„ë˜ëŠ” ë¶„ì„ì— ì‚¬ìš©ëœ ë°ì´í„°ì˜ ì¼ë¶€ ìƒ˜í”Œì…ë‹ˆë‹¤. (ì‹¤ì œ ë°ì´í„°ëŠ” ì´ë¯¸ì§€ ì „ì²´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤)</p>
        <table>
            <thead>
                <tr>
                    <th>íšŒì‚¬ëª…</th>
                    <th>ë…¸ì„ ë²ˆí˜¸</th>
                    <th>ì •ë¥˜ì¥ëª…</th>
                    <th>ìœ„ë„</th>
                    <th>ê²½ë„</th>
                    <th>ì²«ì°¨</th>
                    <th>ë§‰ì°¨</th>
                    <th>ë°°ì°¨ê°„ê²©</th>
                </tr>
            </thead>
            <tbody id="sampleDataTable">
                <!-- ë°ì´í„°ëŠ” JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
            </tbody>
        </table>

        <h2>2. ì •ë¥˜ì¥ ë¶„í¬ ì§€ë„</h2>
        <p>íŒŒì£¼ì‹œ ë‚´ ë²„ìŠ¤ ì •ë¥˜ì¥ì˜ ì§€ë¦¬ì  ë¶„í¬ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ì§€ë„ ìœ„ì˜ ë§ˆì»¤ë¥¼ í´ë¦­í•˜ë©´ ì •ë¥˜ì¥ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        <div id="map"></div>

        <h2>3. íšŒì‚¬ë³„ ìš´ì˜ ì •ë¥˜ì¥ ìˆ˜</h2>
        <p>ê° ë²„ìŠ¤ íšŒì‚¬ê°€ ìš´ì˜í•˜ëŠ” ì •ë¥˜ì¥ì˜ ìˆ˜ë¥¼ ë¹„êµí•œ ë§‰ëŒ€ ê·¸ë˜í”„ì…ë‹ˆë‹¤.</p>
        <div class="chart-container">
            <canvas id="companyStopChart"></canvas>
        </div>

        <h2>4. ë¶„ì„ ê²°ê³¼ ë° ì¶”ê°€ ì œì•ˆ</h2>
        <p>
            ìœ„ ì‹œê°í™”ë¥¼ í†µí•´ íŒŒì£¼ì‹œ ë²„ìŠ¤ ì •ë¥˜ì¥ì˜ ë¶„í¬ í˜„í™©ê³¼ íšŒì‚¬ë³„ ìš´ì˜ ê·œëª¨ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            í•™ìƒë“¤ì€ ì´ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ ì¶”ê°€ ë¶„ì„ì„ ì§„í–‰í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
        </p>
        <ul>
            <li>íŠ¹ì • ë…¸ì„  ë²ˆí˜¸ì˜ ê²½ë¡œ ì‹œê°í™”</li>
            <li>ì²«ì°¨/ë§‰ì°¨ ì‹œê°„ ë¶„í¬ ë¶„ì„ (ì˜ˆ: íˆìŠ¤í† ê·¸ë¨)</li>
            <li>ë°°ì°¨ ê°„ê²©ì— ë”°ë¥¸ ì‚¬ìš©ì í¸ì˜ì„± ë¶„ì„</li>
            <li>ì •ë¥˜ì¥ ë°€ì§‘ ì§€ì—­ ë¶„ì„</li>
            <li>ìœ„ë„/ê²½ë„ ë°ì´í„°ë¥¼ í™œìš©í•œ ì •ë¥˜ì¥ ê°„ ê±°ë¦¬ ê³„ì‚°</li>
        </ul>

        <div class="footer">
            <p>ë°ì´í„° ê¸°ì¤€: ì œê³µëœ ì´ë¯¸ì§€ ìë£Œ. ì‹¤ì œ ë°ì´í„°ì™€ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
    </div>

    <script>
        // ìƒ˜í”Œ ë°ì´í„° (ì´ë¯¸ì§€ì—ì„œ ì¼ë¶€ ì¶”ì¶œ)
        // ì‹¤ì œë¡œëŠ” ë” ë§ì€ ë°ì´í„°ë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.
        const busStopData = [
            { íšŒì‚¬ëª…: "ì‹ ì„±ì—¬ê°", ë…¸ì„ ë²ˆí˜¸: "", ì •ë¥˜ì¥ëª…: "ì›”ë¡±ì‹œë¯¼ê³µì›", ìœ„ë„: 37.7973, ê²½ë„: 126.7695, ì²«ì°¨: "5:30", ë§‰ì°¨: "23:00", ë°°ì°¨ê°„ê²©: "20~25" },
            { íšŒì‚¬ëª…: "ì‹ ì„±ì—¬ê°", ë…¸ì„ ë²ˆí˜¸: "", ì •ë¥˜ì¥ëª…: "ë°ì€ë¹Œë¼.íš¨.í˜¸í…”", ìœ„ë„: 37.84448, ê²½ë„: 126.7973, ì²«ì°¨: "5:20", ë§‰ì°¨: "23:30", ë°°ì°¨ê°„ê²©: "30" },
            { íšŒì‚¬ëª…: "ì‹ ì„±ì—¬ê°", ë…¸ì„ ë²ˆí˜¸: "084(ì™€ì„ì´ˆ)", ì •ë¥˜ì¥ëª…: "ìš´ì •ì—­", ìœ„ë„: 37.7253, ê²½ë„: 126.7678, ì²«ì°¨: "6:00", ë§‰ì°¨: "23:45", ë°°ì°¨ê°„ê²©: "12~24" },
            { íšŒì‚¬ëª…: "ì‹ ì„±ì—¬ê°", ë…¸ì„ ë²ˆí˜¸: "084-1", ì •ë¥˜ì¥ëª…: "ìš´ì •ì—­", ìœ„ë„: 37.7253, ê²½ë„: 126.7678, ì²«ì°¨: "5:30", ë§‰ì°¨: "23:06", ë°°ì°¨ê°„ê²©: "40~50" },
            { íšŒì‚¬ëª…: "í•œì¼ìš´ìˆ˜", ë…¸ì„ ë²ˆí˜¸: "034-1", ì •ë¥˜ì¥ëª…: "êµí•˜ì°¨ê³ ì§€", ìœ„ë„: 37.75285, ê²½ë„: 126.7425, ì²«ì°¨: "5:00", ë§‰ì°¨: "22:00", ë°°ì°¨ê°„ê²©: "60" },
            { íšŒì‚¬ëª…: "í•œì¼ìš´ìˆ˜", ë…¸ì„ ë²ˆí˜¸: "", ì •ë¥˜ì¥ëª…: "ì¥í„°ê³ ê°œ.ê¸ˆì´Œ", ìœ„ë„: 37.77232, ê²½ë„: 126.7335, ì²«ì°¨: "5:00", ë§‰ì°¨: "23:00", ë°°ì°¨ê°„ê²©: "8~10" },
            { íšŒì‚¬ëª…: "ìš°ë¦¬êµí†µ", ë…¸ì„ ë²ˆí˜¸: "", ì •ë¥˜ì¥ëª…: "í’€ë¬´ê³¨", ìœ„ë„: 37.77172, ê²½ë„: 126.7559, ì²«ì°¨: "5:00", ë§‰ì°¨: "23:00", ë°°ì°¨ê°„ê²©: "40~50" },
            { íšŒì‚¬ëª…: "ìš°ë¦¬êµí†µ", ë…¸ì„ ë²ˆí˜¸: "033-1", ì •ë¥˜ì¥ëª…: "íƒ„í˜„ì¤‘í•™êµ", ìœ„ë„: 37.80393, ê²½ë„: 126.7218, ì²«ì°¨: "5:30", ë§‰ì°¨: "23:10", ë°°ì°¨ê°„ê²©: "25" },
            { íšŒì‚¬ëª…: "ê¸°í¥ì—¬ê°", ë…¸ì„ ë²ˆí˜¸: "", ì •ë¥˜ì¥ëª…: "ê¸°í¥ì—¬ê°ì°¨ê³ ì§€", ìœ„ë„: 37.79095, ê²½ë„: 126.7432, ì²«ì°¨: "5:20", ë§‰ì°¨: "22:50", ë°°ì°¨ê°„ê²©: "80~105" },
            { íšŒì‚¬ëª…: "ë¬¸ì‚°ì—¬ê°", ë…¸ì„ ë²ˆí˜¸: "051A", ì •ë¥˜ì¥ëª…: "ë¬¸ì‚°ì‚°ë¦¼í–‰ì •íƒ€ìš´", ìœ„ë„: 37.85647, ê²½ë„: 126.7888, ì²«ì°¨: "5:30", ë§‰ì°¨: "23:40", ë°°ì°¨ê°„ê²©: "10~15" },
            { íšŒì‚¬ëª…: "íŒŒì£¼êµí†µ(ì‹ ì¼)", ë…¸ì„ ë²ˆí˜¸: "", ì •ë¥˜ì¥ëª…: "ë¬¸ì‚°ì‚°ë¦¼í–‰ì •íƒ€ìš´", ìœ„ë„: 37.85722, ê²½ë„: 126.7891, ì²«ì°¨: "5:20", ë§‰ì°¨: "21:50", ë°°ì°¨ê°„ê²©: "60" },
            { íšŒì‚¬ëª…: "ì‹ ì¼ì—¬ê°", ë…¸ì„ ë²ˆí˜¸: "", ì •ë¥˜ì¥ëª…: "íŒŒì£¼í–‰ë³µì„¼í„°", ìœ„ë„: 37.83058, ê²½ë„: 126.8193, ì²«ì°¨: "6:25", ë§‰ì°¨: "18:25", ë°°ì°¨ê°„ê²©: "80" }
        ];

        // 1. ìƒ˜í”Œ ë°ì´í„° í…Œì´ë¸” ì±„ìš°ê¸°
        const sampleTableBody = document.getElementById('sampleDataTable');
        busStopData.slice(0, 5).forEach(stop => { // ì²˜ìŒ 5ê°œë§Œ ìƒ˜í”Œë¡œ í‘œì‹œ
            const row = sampleTableBody.insertRow();
            row.insertCell().textContent = stop.íšŒì‚¬ëª…;
            row.insertCell().textContent = stop.ë…¸ì„ ë²ˆí˜¸ || 'N/A';
            row.insertCell().textContent = stop.ì •ë¥˜ì¥ëª…;
            row.insertCell().textContent = stop.ìœ„ë„;
            row.insertCell().textContent = stop.ê²½ë„;
            row.insertCell().textContent = stop.ì²«ì°¨;
            row.insertCell().textContent = stop.ë§‰ì°¨;
            row.insertCell().textContent = stop.ë°°ì°¨ê°„ê²©;
        });

        // 2. Leaflet ì§€ë„ ì´ˆê¸°í™” ë° ë§ˆì»¤ ì¶”ê°€
        // íŒŒì£¼ì‹œì²­ ê·¼ì²˜ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì§€ë„ ì„¤ì •
        const map = L.map('map').setView([37.76, 126.77], 12); // íŒŒì£¼ì‹œ ëŒ€ëµì  ì¤‘ì‹¬ ìœ„ë„, ê²½ë„ ë° ì¤Œ ë ˆë²¨

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        busStopData.forEach(stop => {
            if (stop.ìœ„ë„ && stop.ê²½ë„) {
                L.marker([stop.ìœ„ë„, stop.ê²½ë„]).addTo(map)
                    .bindPopup(`<b>${stop.ì •ë¥˜ì¥ëª…}</b><br>íšŒì‚¬: ${stop.íšŒì‚¬ëª…}<br>ë…¸ì„ : ${stop.ë…¸ì„ ë²ˆí˜¸ || 'ì •ë³´ì—†ìŒ'}<br>ì²«ì°¨: ${stop.ì²«ì°¨}, ë§‰ì°¨: ${stop.ë§‰ì°¨}`);
            }
        });

        // 3. íšŒì‚¬ë³„ ì •ë¥˜ì¥ ìˆ˜ ì°¨íŠ¸ (Chart.js)
        const companyCounts = {};
        busStopData.forEach(stop => {
            companyCounts[stop.íšŒì‚¬ëª…] = (companyCounts[stop.íšŒì‚¬ëª…] || 0) + 1;
        });

        const companyLabels = Object.keys(companyCounts);
        const companyData = Object.values(companyCounts);

        const ctx = document.getElementById('companyStopChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: companyLabels,
                datasets: [{
                    label: 'ìš´ì˜ ì •ë¥˜ì¥ ìˆ˜',
                    data: companyData,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(255, 206, 86, 0.7)',
                        'rgba(75, 192, 192, 0.7)',
                        'rgba(153, 102, 255, 0.7)',
                        'rgba(255, 159, 64, 0.7)',
                        'rgba(199, 199, 199, 0.7)',
                        'rgba(83, 102, 255, 0.7)',
                        'rgba(40, 159, 64, 0.7)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)',
                        'rgba(159, 159, 159, 1)',
                        'rgba(83, 102, 255, 1)',
                        'rgba(40, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'ì •ë¥˜ì¥ ìˆ˜'
                        }
                    },
                    x: {
                         title: {
                            display: true,
                            text: 'ë²„ìŠ¤ íšŒì‚¬ëª…'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false // ë°ì´í„°ì…‹ì´ í•˜ë‚˜ì´ë¯€ë¡œ ë²”ë¡€ ìˆ¨ê¹€
                    },
                    title: {
                        display: true,
                        text: 'ë²„ìŠ¤ íšŒì‚¬ë³„ ìš´ì˜ ì •ë¥˜ì¥ ìˆ˜',
                        font: {
                            size: 16
                        }
                    }
                }
            }
        });

    </script>
</body>
</html>